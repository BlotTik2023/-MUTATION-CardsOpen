<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="auRboAZPOzBGiyAMr9ULvdZbGlVRhiR19eTnhIkj_Ko" />
    <meta name="description" content="–ò–≥—Ä–∞–π—Ç–µ –≤ Cards Open ‚Äî —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—É—é –∏–≥—Ä—É —Å –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –∫–∞—Ä—Ç! –°–æ–±–∏—Ä–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã –∏ —Å–æ—Ä–µ–≤–Ω—É–π—Ç–µ—Å—å —Å –¥—Ä—É–∑—å—è–º–∏.">
    <meta name="keywords" content="Cards Open, –∏–≥—Ä–∞, –∫–∞—Ä—Ç—ã, mutation cards, –æ—Ç–∫—Ä—ã—Ç–∏–µ –∫–∞—Ä—Ç, –æ–Ω–ª–∞–π–Ω-–∏–≥—Ä–∞">
    <title>–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏</title>
    <style>
        /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
            margin: 0;
            padding: 10px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ —Å—á–µ—Ç—á–∏–∫–æ–≤ */
        .account-value {
            font-size: 20px;
            font-weight: bold;
            margin: 15px 0;
            color: #000000;
            background-color: rgba(233, 233, 233, 1);
            padding: 10px;
            border-radius: 10px;
            display: inline-block;
            width: 100%;
            max-width: 400px;
        }
        
        .account-rank {
            font-size: 18px;
            font-weight: bold;
            margin: 10px 0;
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
            background-color: #e9e9e9;
            transition: all 0.3s;
            width: 100%;
            max-width: 400px;
        }
        
        .rank-beginner { color: #666666; }
        .rank-experienced { color: #2e7d32; }
        .rank-professional { color: #1565c0; }
        .rank-master { color: #6a1b9a; }
        .rank-a { color: #d32f2f; }
        .rank-s { color: #ff9800; }
        .rank-ss { color: #ff5722; }
        .rank-sss { color: #c2185b; }
        .rank-legendary { 
            color: white; 
            background: linear-gradient(90deg, #4a148c, #e91e63); 
            box-shadow: 0 0 10px rgba(233, 30, 99, 0.7);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤–∞–ª—é—Ç—ã */
        .currency-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .currency {
            background-color: #fff;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 5px;
            min-width: 120px;
            justify-content: center;
        }
        
        .cake-currency {
            color: #e91e63;
            border: 2px solid #e91e63;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—á–µ—Ç—á–∏–∫–æ–≤ –∏–≥—Ä–æ–∫–æ–≤ */
        .player-counters {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .player-counter {
            background-color: rgba(233, 233, 233, 1);
            padding: 8px 15px;
            border-radius: 10px;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            min-width: 180px;
        }
        
        .online-counter { color: #4CAF50; }
        .total-counter { color: #2196F3; }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
        .buttons-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 20px;
            font-size: 14px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            flex: 1;
            min-width: 150px;
            max-width: 200px;
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        button:hover:not(:disabled) {
            background-color: #45a049;
        }
        
        .reset-btn {
            background-color: #f44336;
        }
        
        .reset-btn:hover {
            background-color: #d32f2f;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —ç–≤–µ–Ω—Ç–∞ */
        .event-banner {
            background: linear-gradient(45deg, #ff4081, #7b1fa2);
            color: white;
            padding: 12px;
            margin: 10px 0;
            border-radius: 10px;
            animation: pulse 2s infinite;
            font-weight: bold;
            width: 100%;
        }
        
        .seasonal-shop {
            background-color: #fff;
            border-radius: 10px;
            padding: 15px;
            margin: 20px auto;
            max-width: 800px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            width: 100%;
        }
        
        .seasonal-cards {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        
        .seasonal-card {
            width: 110px;
            height: 150px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            font-size: 24px;
            cursor: pointer;
            transition: transform 0.3s;
            position: relative;
        }
        
        .seasonal-card:hover {
            transform: scale(1.05);
        }
        
        .seasonal-card-cost {
            position: absolute;
            bottom: 5px;
            background-color: rgba(0,0,0,0.7);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
        }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏ */
        .main-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 100%;
        }
        
        @media (min-width: 768px) {
            .main-container {
                flex-direction: row;
            }
            
            .left-column, .right-column {
                width: 250px;
                flex-shrink: 0;
            }
            
            .content {
                flex: 1;
                min-width: 0;
            }
        }
        
        .left-column, .right-column {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —á–∞—Ç–∞ –∏ —Ç—Ä–µ–π–¥–æ–≤ */
        .chat-container, .trade-container, .sidebar {
            background-color: #fff;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            width: 100%;
        }
        
        .chat-container {
            height: 200px;
            display: flex;
            flex-direction: column;
        }
        
        .trade-container {
            height: 400px;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar {
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .trade-header, .chat-header, .sidebar-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 16px;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column-reverse;
            padding: 5px;
        }
        
        .message {
            margin-bottom: 8px;
            padding: 5px 8px;
            border-radius: 5px;
            background-color: #f1f1f1;
            word-break: break-word;
            font-size: 13px;
            line-height: 1.3;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ */
        .collection-container {
            width: 100%;
            overflow-x: auto;
        }
        
        .collection {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            padding: 10px;
        }
        
        .mutation-section {
            margin-top: 20px;
            width: 100%;
        }
        
        .mutation-section h3 {
            text-align: center;
            background-color: #e9e9e9;
            padding: 8px;
            border-radius: 5px;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .card-group {
            position: relative;
            width: 140px;
            height: 180px;
            margin: 5px;
        }
        
        .card-count {
            position: absolute;
            top: 0;
            left: 0;
            transform: translate(-25%, 35%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            font-size: 14px;
            z-index: 2;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .stacked-card {
            position: absolute;
            width: 140px;
            height: 180px;
            border-radius: 8px;
            padding: 10px;
            box-sizing: border-box;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 1px black;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            transition: transform 0.3s;
        }
        
        .stacked-card:hover {
            transform: scale(1.05) translateY(-5px);
            z-index: 3;
        }
        
        .stacked-card .card-name {
            font-size: 28px;
            margin-bottom: 5px;
            font-weight: 900;
        }
        
        .stacked-card .card-rarity {
            font-size: 12px;
            margin-bottom: 3px;
        }
        
        .stacked-card .card-chance {
            font-size: 10px;
        }
        
        .stacked-card.pos-0 { transform: rotate(-2deg); z-index: 1; }
        .stacked-card.pos-1 { transform: rotate(1deg) translateY(-3px); z-index: 2; }
        .stacked-card.pos-2 { transform: rotate(3deg) translateY(-6px); z-index: 3; }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 100;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }
        
        .card {
            width: 280px;
            height: 370px;
            border-radius: 15px;
            padding: 15px;
            box-sizing: border-box;
            position: relative;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px black;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 15px;
            padding: 15px;
            box-sizing: border-box;
        }
        
        .card-front {
            background-color: #333;
        }
        
        .card-back {
            background-color: inherit;
            transform: rotateY(180deg);
        }
        
        .card.flipped {
            transform: rotateY(180deg);
        }
        
        .card-name {
            font-size: 42px;
            margin-bottom: 10px;
            font-weight: 900;
        }
        
        .card-rarity {
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .card-chance {
            font-size: 14px;
        }
        
        .mutation-label {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 2px 8px;
            border-radius: 10px;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø–∞–∫–æ–≤ */
        .big-pack-modal-content, .mega-pack-modal-content {
            position: relative;
            width: 90%;
            max-width: 900px;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 15px;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .multi-card-container, .mega-card-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            max-width: 900px;
            margin: 0 auto;
            max-height: 70vh;
            overflow-y: auto;
            padding: 10px;
        }
        
        .multi-card, .mega-card {
            width: 160px;
            height: 200px;
            border-radius: 10px;
            padding: 15px;
            box-sizing: border-box;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 1px black;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            position: relative;
        }
        
        .mega-card {
            width: 120px;
            height: 160px;
            font-size: 16px;
        }
        
        .multi-card-front, .multi-card-back, .mega-card-front, .mega-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 10px;
            padding: 15px;
            box-sizing: border-box;
        }
        
        .multi-card-front, .mega-card-front {
            background-color: #333;
            transform: rotateY(0deg);
        }
        
        .multi-card-back, .mega-card-back {
            background-color: inherit;
            transform: rotateY(180deg);
        }
        
        .multi-card.flipped, .mega-card.flipped {
            transform: rotateY(180deg);
        }
        
        .multi-card .card-name, .mega-card .card-name {
            font-size: 32px;
            margin-bottom: 5px;
            font-weight: 900;
        }
        
        .mega-card .card-name {
            font-size: 24px;
        }
        
        .multi-card .card-rarity, .mega-card .card-rarity {
            font-size: 14px;
            margin-bottom: 3px;
        }
        
        .multi-card .card-chance, .mega-card .card-chance {
            font-size: 11px;
        }
        
        .pack-title {
            color: white;
            text-shadow: 1px 1px 2px black;
            margin-bottom: 20px;
            font-size: 24px;
        }
        
        .mega-pack-title {
            color: gold;
            text-shadow: 1px 1px 2px black;
            margin-bottom: 20px;
            font-size: 28px;
            animation: shine 2s infinite;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        @keyframes pulse {
            0% { box-shadow: 0 0 5px rgba(255, 64, 129, 0.7); }
            50% { box-shadow: 0 0 20px rgba(255, 64, 129, 0.7); }
            100% { box-shadow: 0 0 5px rgba(255, 64, 129, 0.7); }
        }
        
        .shiny {
            animation: shine 2s infinite;
        }
        
        @keyframes shine {
            0% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
            100% { filter: brightness(1); }
        }
        
        .golden {
            border: 3px solid gold;
            box-shadow: 0 0 15px gold;
        }
        
        .ultra-legendary {
            animation: rainbow-border 3s infinite linear;
        }
        
        .void {
            border: 3px solid #000;
            box-shadow: 0 0 15px #000, inset 0 0 8px #666;
        }
        
        @keyframes rainbow-border {
            0% { box-shadow: 0 0 15px red; border: 3px solid red; }
            14% { box-shadow: 0 0 15px orange; border: 3px solid orange; }
            28% { box-shadow: 0 0 15px yellow; border: 3px solid yellow; }
            42% { box-shadow: 0 0 15px green; border: 3px solid green; }
            56% { box-shadow: 0 0 15px blue; border: 3px solid blue; }
            70% { box-shadow: 0 0 15px indigo; border: 3px solid indigo; }
            84% { box-shadow: 0 0 15px violet; border: 3px solid violet; }
            100% { box-shadow: 0 0 15px red; border: 3px solid red; }
        }
        
        /* –ö—É–ª–¥–∞—É–Ω –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .cooldown {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 14px;
            z-index: 10;
            display: none;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 24px;
            border-radius: 5px;
            z-index: 1001;
            display: none;
            max-width: 90%;
            text-align: center;
        }
        
        .boost-notification {
            position: fixed;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 10px 20px;
            border-radius: 5px;
            z-index: 1002;
            display: flex;
            align-items: center;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            animation: pulse 2s infinite;
            max-width: 90%;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (max-width: 480px) {
            .player-counter, .currency {
                min-width: 140px;
                font-size: 14px;
            }
            
            button {
                min-width: 130px;
                padding: 10px 15px;
                font-size: 13px;
            }
            
            .card-group {
                width: 120px;
                height: 160px;
            }
            
            .stacked-card {
                width: 120px;
                height: 160px;
                font-size: 18px;
            }
            
            .stacked-card .card-name {
                font-size: 24px;
            }
            
            .multi-card, .mega-card {
                width: 140px;
                height: 180px;
            }
            
            .mega-card {
                width: 100px;
                height: 140px;
            }
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–µ–¥–∫–æ—Å—Ç—è—Ö */
        .rarity-info {
            margin: 20px auto;
            padding: 15px;
            background-color: #e9e9e9;
            border-radius: 5px;
            max-width: 800px;
            width: 100%;
            text-align: left;
        }
        
        .rarity-info h3 {
            text-align: center;
            margin-top: 0;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–∞–π–¥–±–∞—Ä–∞ */
        .card-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .card-list-item {
            display: flex;
            align-items: center;
            padding: 8px;
            border-radius: 5px;
            background-color: #f9f9f9;
            transition: background-color 0.2s;
        }
        
        .card-list-item:hover {
            background-color: #f0f0f0;
        }
        
        .card-preview {
            width: 40px;
            height: 40px;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 18px;
            color: white;
            margin-right: 10px;
            flex-shrink: 0;
        }
        
        .card-info {
            flex-grow: 1;
            text-align: left;
        }
        
        .card-name-small {
            font-weight: bold;
            font-size: 14px;
        }
        
        .card-rarity-small {
            font-size: 12px;
            color: #666;
        }
        
        .card-count {
            font-weight: bold;
            font-size: 14px;
            margin-left: 10px;
            min-width: 30px;
            text-align: right;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ª–æ–≥–∏–Ω–∞ */
        .login-modal {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .login-form {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            width: 300px;
            text-align: center;
        }
        
        .login-form h2 {
            margin-top: 0;
        }
        
        .login-form input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            box-sizing: border-box;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .login-form button {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="loginModal" class="login-modal">
            <div class="login-form">
                <h2>–í—Ö–æ–¥ –≤ –∏–≥—Ä—É</h2>
                <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è –¥–ª—è –∏–≥—Ä—ã</p>
                <input type="text" id="playerNameInput" placeholder="–í–∞—à–µ –∏–º—è" maxlength="20">
                <button id="loginButton">–í–æ–π—Ç–∏</button>
            </div>
        </div>
        
        <div id="notification" class="notification"></div>
        
        <!-- –ë–∞–Ω–Ω–µ—Ä —ç–≤–µ–Ω—Ç–∞ -->
        <div id="eventBanner" class="event-banner" style="display: none;">
            üéâ HAPPY B-DAY! –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è —É–¥–∞—á–∞ –∏ –Ω–æ–≤—ã–µ –∫–∞—Ä—Ç—ã! üéâ
        </div>
        
        <h1>–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏</h1>
        
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∞–ª—é—Ç—ã -->
        <div class="currency-container">
            <div class="currency cake-currency">
                <span>üéÇ</span>
                <span id="cakeCount">0</span>
            </div>
        </div>
        
        <div class="account-value">–¶–µ–Ω–Ω–æ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç–∞: <span id="accountValue">0</span></div>
        <div id="accountRank" class="account-rank rank-beginner">–Ω–∞—á–∏–Ω–∞—é—â–∏–π –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä</div>
        
        <div class="player-counters">
            <div class="player-counter online-counter">–ò–≥—Ä–æ–∫–æ–≤ –æ–Ω–ª–∞–π–Ω: <span id="onlinePlayers">0</span></div>
            <div class="player-counter total-counter">–í—Å–µ–≥–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π: <span id="totalPlayers">0</span></div>
        </div>
        
        <div class="buttons-container">
            <button id="buyPack">–û–±—ã—á–Ω—ã–π –ø–∞–∫ (1)</button>
            <button id="buyBigPack">–ë–æ–ª—å—à–æ–π –ø–∞–∫ (5-7)</button>
            <button id="buyMegaPack">–ú–µ–≥–∞ –ø–∞–∫ (100)</button>
            <button id="resetCollection" class="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å</button>
        </div>
        
        <!-- –ú–∞–≥–∞–∑–∏–Ω —Å–µ–∑–æ–Ω–Ω—ã—Ö –∫–∞—Ä—Ç -->
        <div id="seasonalShop" class="seasonal-shop" style="display: none;">
            <h2>üé™ –ú–∞–≥–∞–∑–∏–Ω —Å–µ–∑–æ–Ω–Ω—ã—Ö –∫–∞—Ä—Ç</h2>
            <p>–û–±–º–µ–Ω–∏–≤–∞–π—Ç–µ —Ç–æ—Ä—Ç–∏–∫–∏ –Ω–∞ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã!</p>
            <div class="seasonal-cards">
                <!-- –ö–∞—Ä—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>

        <div class="rarity-info">
            <h3>–®–∞–Ω—Å—ã –≤—ã–ø–∞–¥–µ–Ω–∏—è (–æ—Ç —Å–∞–º—ã—Ö —á–∞—Å—Ç—ã—Ö –∫ —Å–∞–º—ã–º —Ä–µ–¥–∫–∏–º):</h3>
            <div id="rarityChances"></div>
            <h3>–ú—É—Ç–∞—Ü–∏–∏ –∫–∞—Ä—Ç:</h3>
            <div>–ë–ª–µ—Å—Ç—è—â–∞—è: 10% —à–∞–Ω—Å (–∫–∞—Ä—Ç–∞ –ø–µ—Ä–µ–ª–∏–≤–∞–µ—Ç—Å—è)</div>
            <div>–ó–æ–ª–æ—Ç–∞—è: 1.25% —à–∞–Ω—Å (–∑–æ–ª–æ—Ç–∞—è –æ–±–≤–æ–¥–∫–∞)</div>
            <div>–£–ª—å—Ç—Ä–∞–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è: 0.1% —à–∞–Ω—Å (—Ä–∞–¥—É–∂–Ω–∞—è –æ–±–≤–æ–¥–∫–∞)</div>
            <div>–ü—É—Å—Ç–æ—Ç–Ω–∞—è: 0.0125% —à–∞–Ω—Å (—á—ë—Ä–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ, –Ω–µ–ª—å–∑—è –æ–±–º–µ–Ω–∏–≤–∞—Ç—å)</div>
        </div>
        
        <div class="main-container">
            <div class="left-column">
                <div class="chat-container">
                    <div class="chat-header">–ß–∞—Ç –∏–≥—Ä—ã</div>
                    <div id="chatMessages" class="chat-messages"></div>
                </div>
                
                <div class="sidebar">
                    <div class="sidebar-title">–í–∞—à–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è</div>
                    <div id="sidebarCardList" class="card-list"></div>
                </div>
            </div>
            
            <div class="content">
                <div id="cardModal" class="modal">
                    <div class="modal-content">
                        <div id="newCard" class="card">
                            <div class="card-front">–û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞—Ä—Ç—É...</div>
                            <div class="card-back">
                                <div class="card-name"></div>
                                <div class="card-rarity"></div>
                                <div class="card-chance"></div>
                                <div class="mutation-label"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø–∞–∫–æ–≤ -->
                <div id="bigPackModal" class="modal">
                    <div class="big-pack-modal-content">
                        <h2 class="pack-title">–ë–æ–ª—å—à–æ–π –ø–∞–∫ –∫–∞—Ä—Ç</h2>
                        <div id="multiCardContainer" class="multi-card-container"></div>
                    </div>
                </div>
                
                <div id="megaPackModal" class="modal">
                    <div class="mega-pack-modal-content">
                        <h2 class="mega-pack-title">‚ö° –ú–ï–ì–ê –ü–ê–ö ‚ö°</h2>
                        <div id="megaCardContainer" class="mega-card-container"></div>
                    </div>
                </div>
                
                <h2>–í–∞—à–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è</h2>
                <div class="collection-container">
                    <div id="collection" class="collection">
                        <!-- –°–µ–∑–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã -->
                        <div class="mutation-section seasonal-cards-section">
                            <h3>üé™ –°–µ–∑–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã</h3>
                            <div id="seasonalCards" class="collection"></div>
                        </div>
                        
                        <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏ -->
                        <div class="mutation-section ultra-legendary-cards">
                            <h3>–£–ª—å—Ç—Ä–∞–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ –∫–∞—Ä—Ç—ã</h3>
                            <div id="ultraLegendaryCards" class="collection"></div>
                        </div>
                        <div class="mutation-section golden-cards">
                            <h3>–ó–æ–ª–æ—Ç—ã–µ –∫–∞—Ä—Ç—ã</h3>
                            <div id="goldenCards" class="collection"></div>
                        </div>
                        <div class="mutation-section shiny-cards">
                            <h3>–ë–ª–µ—Å—Ç—è—â–∏–µ –∫–∞—Ä—Ç—ã</h3>
                            <div id="shinyCards" class="collection"></div>
                        </div>
                        <div class="mutation-section normal-cards">
                            <h3>–û–±—ã—á–Ω—ã–µ –∫–∞—Ä—Ç—ã</h3>
                            <div id="normalCards" class="collection"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="right-column">
                <div class="trade-container">
                    <div class="trade-header">–û–±–º–µ–Ω –∫–∞—Ä—Ç–∞–º–∏</div>
                    <div id="tradeOffers" class="trade-offers"></div>
                    <div class="trade-create">
                        <select id="giveCardSelect" class="trade-select">
                            <option value="">-- –û—Ç–¥–∞—é --</option>
                        </select>
                        <select id="getCardSelect" class="trade-select">
                            <option value="">-- –ü–æ–ª—É—á–∞—é --</option>
                        </select>
                        <button id="createTrade" class="trade-button">–°–æ–∑–¥–∞—Ç—å –æ–±–º–µ–Ω</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="cooldown" class="cooldown" style="display: none;"></div>
    <div id="megaPackTimer" class="cooldown" style="display: none; top: 50px;"></div>

    <script>
        // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ä—Ç
        const cardTypes = [
            { name: "H", rarity: "–ë–∞–∑–æ–≤—ã–π", color: "#AAAAAA", weight: 16384 },
            { name: "F", rarity: "–û–±—ã—á–Ω—ã–π", color: "#777777", weight: 4096 },
            { name: "E", rarity: "–ù–µ–æ–±—ã—á–Ω—ã–π", color: "#5555FF", weight: 1024 },
            { name: "D", rarity: "–†–µ–¥–∫–∏–π", color: "#AA00AA", weight: 256 },
            { name: "C", rarity: "–≠–ø–∏—á–µ—Å–∫–∏–π", color: "#FFAA00", weight: 64 },
            { name: "B", rarity: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π", color: "#FF5555", weight: 16 },
            { name: "A", rarity: "–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π", color: "#FF0000", weight: 4 },
            { name: "A+", rarity: "–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π", color: "#FF00FF", weight: 1 },
            { name: "S+", rarity: "–¢—Ä–∞–Ω—Å—Ü–µ–Ω–¥–µ–Ω—Ç–Ω—ã–π", color: "#00FFFF", weight: 0.25 },
            { name: "S++", rarity: "–í–µ—á–Ω—ã–π", color: "#FFFF00", weight: 0.0625 },
            { name: "S+++", rarity: "–ê–±—Å–æ–ª—é—Ç–Ω—ã–π", color: "#00FF00", weight: 0.015625 },
            { name: "S", rarity: "–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω—ã–π", color: "#FF8800", weight: 0.00390625 },
            { name: "SS+", rarity: "–°–≤–µ—Ä—Ö—ä–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π", color: "#8800FF", weight: 0.0009765625 },
            { name: "SSS", rarity: "–í—Å–µ–ª–µ–Ω—Å–∫–∏–π", color: "#FF0088", weight: 0.000244140625 }
        ];

        // –°–µ–∑–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã
        const seasonalCards = [
            { name: "üç∞", rarity: "–ü–∏—Ä–æ–≥", color: "#fadbc0", cost: 150, type: "seasonal" },
            { name: "üí∞", rarity: "–î–µ–Ω–µ–∂–Ω–∞—è", color: "#efa94a", cost: 350, type: "seasonal" },
            { name: "üéÇ", rarity: "–¢–æ—Ä—Ç–∏–∫!", color: "#422723", cost: 250, type: "seasonal" },
            { name: "‚ùÑ", rarity: "–°–Ω–µ–∂–∏–Ω–∫–∞", color: "#B3E5FC", cost: 200, type: "seasonal" },
            { name: "‚õÑ", rarity: "–°–Ω–µ–≥–æ–≤–∏–∫", color: "#ddeeff", cost: 200, type: "seasonal" }
        ];

        // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—â–∏–π –≤–µ—Å –¥–ª—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π
        const totalWeight = cardTypes.reduce((sum, card) => sum + card.weight, 0);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —à–∞–Ω—Å—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≤–µ—Å–æ–º
        cardTypes.forEach(card => {
            const chance = totalWeight / card.weight;
            card.chance = `1 –∫ ${Math.round(chance)}`;
        });

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let userCollection = loadCollection();
        let playerCakes = parseInt(localStorage.getItem('playerCakes')) || 0;
        let isCooldown = false;
        const COOLDOWN_TIME = 3000;
        const BIG_PACK_COOLDOWN = 5000;
        const MEGA_PACK_COOLDOWN = 10000; // 10 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Ç–µ—Å—Ç–∞ (–≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ 25 —á–∞—Å–æ–≤)
        let playerName = localStorage.getItem('playerName') || '';
        let megaPackAvailable = true;

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const eventBanner = document.getElementById('eventBanner');
        const seasonalShop = document.getElementById('seasonalShop');
        const cakeCountElement = document.getElementById('cakeCount');
        const seasonalCardsSection = document.getElementById('seasonalCards');
        const ultraLegendaryCardsSection = document.getElementById('ultraLegendaryCards');
        const goldenCardsSection = document.getElementById('goldenCards');
        const shinyCardsSection = document.getElementById('shinyCards');
        const normalCardsSection = document.getElementById('normalCards');
        const sidebarCardList = document.getElementById('sidebarCardList');
        const chatMessages = document.getElementById('chatMessages');
        const buyPackBtn = document.getElementById('buyPack');
        const buyBigPackBtn = document.getElementById('buyBigPack');
        const buyMegaPackBtn = document.getElementById('buyMegaPack');
        const resetBtn = document.getElementById('resetCollection');
        const cardModal = document.getElementById('cardModal');
        const bigPackModal = document.getElementById('bigPackModal');
        const megaPackModal = document.getElementById('megaPackModal');
        const newCard = document.getElementById('newCard');
        const multiCardContainer = document.getElementById('multiCardContainer');
        const megaCardContainer = document.getElementById('megaCardContainer');
        const cooldownElement = document.getElementById('cooldown');
        const accountValueElement = document.getElementById('accountValue');
        const accountRankElement = document.getElementById('accountRank');
        const onlinePlayersElement = document.getElementById('onlinePlayers');
        const totalPlayersElement = document.getElementById('totalPlayers');
        const rarityChancesElement = document.getElementById('rarityChances');
        const loginModal = document.getElementById('loginModal');
        const playerNameInput = document.getElementById('playerNameInput');
        const loginButton = document.getElementById('loginButton');
        const notificationElement = document.getElementById('notification');

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —ç–≤–µ–Ω—Ç–∞
        function checkEvent() {
            const now = new Date();
            const day = now.getDate();
            const month = now.getMonth() + 1;
            
            // –≠–≤–µ–Ω—Ç —Å 18 –ø–æ 23 —á–∏—Å–ª–æ –ª—é–±–æ–≥–æ –º–µ—Å—è—Ü–∞
            if (day >= 18 && day <= 23) {
                eventBanner.style.display = 'block';
                seasonalShop.style.display = 'block';
                initSeasonalShop();
                return true;
            }
            
            eventBanner.style.display = 'none';
            seasonalShop.style.display = 'none';
            return false;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–Ω–æ–∂–∏—Ç–µ–ª—è —É–¥–∞—á–∏ —ç–≤–µ–Ω—Ç–∞
        function getEventLuckMultiplier() {
            const now = new Date();
            const day = now.getDate();
            
            if (day === 18 || day === 19) return 2.0;
            if (day === 20) return 5.0;
            if (day >= 21 && day <= 23) return 2.0;
            
            return 1.0;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–π –∫–∞—Ä—Ç—ã —Å —É—á–µ—Ç–æ–º —ç–≤–µ–Ω—Ç–∞
        function getRandomCard() {
            const boosts = checkSpecialEvents();
            const eventMultiplier = getEventLuckMultiplier();
            const boostMultiplier = boosts.total * eventMultiplier;

            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –≤–µ—Å —Ä–µ–¥–∫–∏—Ö –∫–∞—Ä—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –±—É—Å—Ç–æ–º
            const boostedCardTypes = cardTypes.map(card => {
                const rarityFactor = 1 + (Math.log(card.weight) / Math.log(2)) / 10;
                const boostedWeight = card.weight * (1 + (boostMultiplier - 1) * rarityFactor);
                return {
                    ...card,
                    weight: boostedWeight
                };
            });

            const boostedTotalWeight = boostedCardTypes.reduce((sum, card) => sum + card.weight, 0);
            
            const randomValue = Math.random() * boostedTotalWeight;
            let cumulativeWeight = 0;
            let selectedCard = null;
            
            for (const card of boostedCardTypes) {
                cumulativeWeight += card.weight;
                if (randomValue <= cumulativeWeight) {
                    selectedCard = card;
                    break;
                }
            }
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º—É—Ç–∞—Ü–∏—é –∫–∞—Ä—Ç—ã
            let mutation = null;
            const mutationRoll = Math.random() * 100 * (1 + (boostMultiplier - 1) * 0.5);
            
            if (mutationRoll < 0.0125) {
                mutation = "void";
            } else if (mutationRoll < 0.1) {
                mutation = "ultra-legendary";
            } else if (mutationRoll < 1.35) {
                mutation = "golden";
            } else if (mutationRoll < 11.35) {
                mutation = "shiny";
            }
            
            // –®–∞–Ω—Å –≤—ã–ø–∞–¥–µ–Ω–∏—è –≤–∞–ª—é—Ç—ã (—Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è —ç–≤–µ–Ω—Ç–∞)
            let currencyDrop = null;
            if (checkEvent() && Math.random() < 0.3) { // 30% —à–∞–Ω—Å –≤–æ –≤—Ä–µ–º—è —ç–≤–µ–Ω—Ç–∞
                currencyDrop = { type: 'cake', amount: 1 };
            }
            
            return {
                ...selectedCard, 
                id: Date.now() + Math.floor(Math.random() * 1000),
                mutation: mutation,
                boosted: boosts.details,
                eventMultiplier: eventMultiplier,
                currencyDrop: currencyDrop
            };
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–∞–ª—é—Ç—ã
        function addCurrency(type, amount) {
            if (type === 'cake') {
                playerCakes += amount;
                localStorage.setItem('playerCakes', playerCakes);
                cakeCountElement.textContent = playerCakes;
                showNotification(`–ü–æ–ª—É—á–µ–Ω–æ ${amount} üéÇ!`);
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞–≥–∞–∑–∏–Ω–∞ —Å–µ–∑–æ–Ω–Ω—ã—Ö –∫–∞—Ä—Ç
        function initSeasonalShop() {
            const seasonalCardsContainer = document.querySelector('.seasonal-cards');
            seasonalCardsContainer.innerHTML = '';
            
            seasonalCards.forEach(card => {
                if (card.type === "seasonal") { // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Å–µ–∑–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã
                    const cardElement = document.createElement('div');
                    cardElement.className = 'seasonal-card';
                    cardElement.style.backgroundColor = card.color;
                    cardElement.innerHTML = `
                        <div class="card-name">${card.name}</div>
                        <div class="card-rarity">${card.rarity}</div>
                        <div class="seasonal-card-cost">üéÇ ${card.cost}</div>
                    `;
                    
                    cardElement.addEventListener('click', () => {
                        buySeasonalCard(card);
                    });
                    
                    seasonalCardsContainer.appendChild(cardElement);
                }
            });
        }

        // –ü–æ–∫—É–ø–∫–∞ —Å–µ–∑–æ–Ω–Ω–æ–π –∫–∞—Ä—Ç—ã
        function buySeasonalCard(cardData) {
            if (playerCakes < cardData.cost) {
                showNotification(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ—Ä—Ç–∏–∫–æ–≤! –ù—É–∂–Ω–æ ${cardData.cost} üéÇ`);
                return;
            }
            
            if (confirm(`–ö—É–ø–∏—Ç—å –∫–∞—Ä—Ç—É ${cardData.name} (${cardData.rarity}) –∑–∞ ${cardData.cost} üéÇ?`)) {
                playerCakes -= cardData.cost;
                localStorage.setItem('playerCakes', playerCakes);
                cakeCountElement.textContent = playerCakes;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç—É –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é
                const newCard = {
                    ...cardData,
                    id: Date.now() + Math.floor(Math.random() * 1000),
                    chance: "–°–µ–∑–æ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞",
                    type: "seasonal"
                };
                
                userCollection.push(newCard);
                saveCollection();
                updateAccountValue();
                updateCollection();
                
                showNotification(`–í—ã –∫—É–ø–∏–ª–∏ –∫–∞—Ä—Ç—É ${cardData.name}!`);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—Ç—É
                showCardInModal(newCard);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–∞—Ä—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∞–ª—é—Ç—ã
        function processCardDrop(card) {
            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤—ã–ø–∞–¥–µ–Ω–∏–µ –≤–∞–ª—é—Ç—ã
            if (card.currencyDrop) {
                addCurrency(card.currencyDrop.type, card.currencyDrop.amount);
            } else {
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç—É –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –≤–∞–ª—é—Ç–∞
                userCollection.push(card);
                saveCollection();
                updateAccountValue();
                updateCollection();
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç –¥–ª—è —Ä–µ–¥–∫–∏—Ö –∫–∞—Ä—Ç
            const isCommonCard = ['H', 'F'].includes(card.name);
            const isNormalMutation = !card.mutation || card.mutation === "shiny";
            
            if (!(isCommonCard && isNormalMutation) || card.currencyDrop) {
                let message = `–ü–æ–ª—É—á–µ–Ω–∞ –∫–∞—Ä—Ç–∞ ${card.name}`;
                if (card.mutation === "shiny") {
                    message = `–ü–æ–ª—É—á–µ–Ω–∞ –±–ª–µ—Å—Ç—è—â–∞—è –∫–∞—Ä—Ç–∞ ${card.name}!`;
                } else if (card.mutation === "golden") {
                    message = `–ü–æ–ª—É—á–µ–Ω–∞ –∑–æ–ª–æ—Ç–∞—è –∫–∞—Ä—Ç–∞ ${card.name}!!`;
                } else if (card.mutation === "ultra-legendary") {
                    message = `–ü–æ–ª—É—á–µ–Ω–∞ –£–õ–¨–¢–†–ê–õ–ï–ì–ï–ù–î–ê–†–ù–ê–Ø –∫–∞—Ä—Ç–∞ ${card.name}!!!`;
                } else if (card.mutation === "void") {
                    message = `–ü–æ–ª—É—á–µ–Ω–∞ –ü–£–°–¢–û–¢–ù–ê–Ø –∫–∞—Ä—Ç–∞ ${card.name}!!!!`;
                }
                
                if (card.currencyDrop) {
                    message = `–ü–æ–ª—É—á–µ–Ω–æ ${card.currencyDrop.amount} üéÇ`;
                }
                
                addChatMessage(message, card.color, card.mutation);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –±–æ–ª—å—à–æ–≥–æ –ø–∞–∫–∞
        function openBigPack() {
            if (isCooldown) return;
            
            startCooldown(BIG_PACK_COOLDOWN);
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ä—Ç –≤ –ø–∞–∫–µ (5-7)
            const cardCount = 5 + Math.floor(Math.random() * 3);
            const cards = [];
            
            // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—ã –¥–ª—è –ø–∞–∫–∞
            for (let i = 0; i < cardCount; i++) {
                cards.push(getRandomCard());
            }
            
            // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            multiCardContainer.innerHTML = '';
            
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∫–∞—Ä—Ç
            cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'multi-card';
                cardElement.innerHTML = `
                    <div class="multi-card-front">–ö–∞—Ä—Ç–∞ ${index + 1}</div>
                    <div class="multi-card-back" style="background-color: ${card.color}">
                        <div class="card-name">${card.name}</div>
                        <div class="card-rarity">${card.rarity}</div>
                        <div class="card-chance">${card.chance}</div>
                        <div class="mutation-label"></div>
                    </div>
                `;
                multiCardContainer.appendChild(cardElement);
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –º—É—Ç–∞—Ü–∏—é
                applyMutationStyles(cardElement, card.mutation);
                
                // –ê–Ω–∏–º–∏—Ä—É–µ–º –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç –∫–∞—Ä—Ç–æ—á–µ–∫ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
                setTimeout(() => {
                    cardElement.classList.add('flipped');
                }, 500 + (index * 300));
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            bigPackModal.style.display = 'flex';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ –∫–∞—Ä—Ç—ã –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é
            cards.forEach(card => {
                processCardDrop(card);
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–µ–≥–∞ –ø–∞–∫–∞
        function openMegaPack() {
            if (isCooldown || !megaPackAvailable) return;
            
            startCooldown(COOLDOWN_TIME);
            
            const cards = [];
            
            // –°–æ–∑–¥–∞–µ–º 100 –∫–∞—Ä—Ç –¥–ª—è –º–µ–≥–∞ –ø–∞–∫–∞
            for (let i = 0; i < 100; i++) {
                cards.push(getRandomCard());
            }
            
            // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            megaCardContainer.innerHTML = '';
            
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∫–∞—Ä—Ç
            cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'mega-card';
                cardElement.innerHTML = `
                    <div class="mega-card-front">${index + 1}</div>
                    <div class="mega-card-back" style="background-color: ${card.color}">
                        <div class="card-name">${card.name}</div>
                        <div class="card-rarity">${card.rarity}</div>
                        <div class="card-chance">${card.chance}</div>
                        <div class="mutation-label"></div>
                    </div>
                `;
                megaCardContainer.appendChild(cardElement);
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –º—É—Ç–∞—Ü–∏—é
                applyMutationStyles(cardElement, card.mutation);
                
                // –ê–Ω–∏–º–∏—Ä—É–µ–º –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç –∫–∞—Ä—Ç–æ—á–µ–∫ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
                setTimeout(() => {
                    cardElement.classList.add('flipped');
                }, 500 + (index * 50));
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            megaPackModal.style.display = 'flex';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ –∫–∞—Ä—Ç—ã –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é
            cards.forEach(card => {
                processCardDrop(card);
            });
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –º–µ–≥–∞ –ø–∞–∫ –¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
            megaPackAvailable = false;
            buyMegaPackBtn.disabled = true;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Å —Ä–∞–∑–¥–µ–ª–æ–º —Å–µ–∑–æ–Ω–Ω—ã—Ö –∫–∞—Ä—Ç
        function updateCollection() {
            // –û—á–∏—â–∞–µ–º –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏
            seasonalCardsSection.innerHTML = '';
            ultraLegendaryCardsSection.innerHTML = '';
            goldenCardsSection.innerHTML = '';
            shinyCardsSection.innerHTML = '';
            normalCardsSection.innerHTML = '';
            sidebarCardList.innerHTML = '';
            
            // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –∫–∞—Ä—Ç—ã –ø–æ —Ç–∏–ø—É –∏ –º—É—Ç–∞—Ü–∏–∏
            const groupedCards = {};
            
            userCollection.forEach(card => {
                const key = `${card.name}-${card.mutation || 'normal'}-${card.type || 'regular'}`;
                if (!groupedCards[key]) {
                    groupedCards[key] = {
                        card: card,
                        count: 0
                    };
                }
                groupedCards[key].count++;
            });
            
            // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ–±—ä–µ–∫—Ç –≤ –º–∞—Å—Å–∏–≤ –∏ —Å–æ—Ä—Ç–∏—Ä—É–µ–º
            const sortedGroups = Object.values(groupedCards).sort((a, b) => {
                // –°–Ω–∞—á–∞–ª–∞ —Å–µ–∑–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã
                if (a.card.type === "seasonal" && b.card.type !== "seasonal") return -1;
                if (a.card.type !== "seasonal" && b.card.type === "seasonal") return 1;
                
                // –ó–∞—Ç–µ–º –æ–±—ã—á–Ω—ã–µ –∫–∞—Ä—Ç—ã –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏
                const aIndex = cardTypes.findIndex(c => c.name === a.card.name);
                const bIndex = cardTypes.findIndex(c => c.name === b.card.name);
                return bIndex - aIndex;
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç—ã –≤ —Å–∞–π–¥–±–∞—Ä –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ä–∞–∑–¥–µ–ª—ã
            sortedGroups.forEach(group => {
                const card = group.card;
                const count = group.count;
                
                // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è —Å–∞–π–¥–±–∞—Ä–∞
                const listItem = document.createElement('div');
                listItem.className = 'card-list-item';
                
                // –°–æ–∑–¥–∞–µ–º –ø—Ä–µ–≤—å—é –∫–∞—Ä—Ç—ã
                const preview = document.createElement('div');
                preview.className = 'card-preview';
                preview.style.backgroundColor = card.color;
                preview.textContent = card.name;
                
                // –°–æ–∑–¥–∞–µ–º –±–ª–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–∞—Ä—Ç–µ
                const info = document.createElement('div');
                info.className = 'card-info';
                
                const name = document.createElement('div');
                name.className = 'card-name-small';
                name.textContent = card.rarity;
                
                const rarity = document.createElement('div');
                rarity.className = 'card-rarity-small';
                rarity.textContent = card.name;
                
                info.appendChild(name);
                info.appendChild(rarity);
                
                // –°–æ–∑–¥–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–∞—Ä—Ç
                const counter = document.createElement('div');
                counter.className = 'card-count';
                counter.textContent = count;
                
                // –°–æ–±–∏—Ä–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞
                listItem.appendChild(preview);
                listItem.appendChild(info);
                listItem.appendChild(counter);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å–∞–π–¥–±–∞—Ä
                sidebarCardList.appendChild(listItem);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ä–∞–∑–¥–µ–ª—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏
                const cardGroup = document.createElement('div');
                cardGroup.className = 'card-group';
                
                const countBadge = document.createElement('div');
                countBadge.className = 'card-count';
                countBadge.textContent = count;
                cardGroup.appendChild(countBadge);
                
                // –°–æ–∑–¥–∞–µ–º 1-3 –∫–∞—Ä—Ç—ã –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Å—Ç–æ–ø–∫–µ
                const displayCount = Math.min(count, 3);
                for (let i = 0; i < displayCount; i++) {
                    const cardElement = document.createElement('div');
                    cardElement.className = `stacked-card pos-${i}`;
                    cardElement.style.backgroundColor = card.color;
                    cardElement.innerHTML = `
                        <div class="card-name">${card.name}</div>
                        <div class="card-rarity">${card.rarity}</div>
                        <div class="card-chance">${card.chance || "–°–µ–∑–æ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞"}</div>
                    `;
                    
                    // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç–∏–ª–∏ –º—É—Ç–∞—Ü–∏–∏
                    if (card.mutation === "shiny") {
                        cardElement.classList.add('shiny');
                    } else if (card.mutation === "golden") {
                        cardElement.classList.add('golden');
                    } else if (card.mutation === "ultra-legendary") {
                        cardElement.classList.add('ultra-legendary');
                    } else if (card.mutation === "void") {
                        cardElement.classList.add('void');
                    }
                    
                    cardGroup.appendChild(cardElement);
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≥—Ä—É–ø–ø—É –∫–∞—Ä—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª –∫–æ–ª–ª–µ–∫—Ü–∏–∏
                if (card.type === "seasonal") {
                    seasonalCardsSection.appendChild(cardGroup);
                } else if (card.mutation === "ultra-legendary") {
                    ultraLegendaryCardsSection.appendChild(cardGroup);
                } else if (card.mutation === "golden") {
                    goldenCardsSection.appendChild(cardGroup);
                } else if (card.mutation === "shiny") {
                    shinyCardsSection.appendChild(cardGroup);
                } else {
                    normalCardsSection.appendChild(cardGroup);
                }
            });
        }

        // –ë–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function loadCollection() { 
            return JSON.parse(localStorage.getItem('cardCollection')) || []; 
        }
        
        function saveCollection() { 
            localStorage.setItem('cardCollection', JSON.stringify(userCollection)); 
        }
        
        function updateAccountValue() {
            const rarityValues = {
                'H': 0.1, 'F': 1, 'E': 5, 'D': 15, 'C': 50, 'B': 150, 'A': 400,
                'A+': 600, 'S+': 1000, 'S++': 1500, 'S+++': 2000, 'S': 2500,
                'SS+': 3000, 'SSS': 3333, 'üéÉ': 100, 'üëª': 150, '‚ò†Ô∏è': 200, '‚ùÑ': 100, '‚õÑ': 150
            };
            
            let totalValue = 0;
            userCollection.forEach(card => {
                const cardValue = rarityValues[card.name] || 0;
                let multiplier = 1;
                if (card.mutation === "shiny") multiplier = 1.5;
                else if (card.mutation === "golden") multiplier = 3;
                else if (card.mutation === "ultra-legendary") multiplier = 10;
                else if (card.mutation === "void") multiplier = 50;
                totalValue += cardValue * multiplier;
            });
            
            accountValueElement.textContent = Math.round(totalValue * 10) / 10;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–Ω–≥
            const rank = getAccountRank(totalValue);
            accountRankElement.textContent = rank.name;
            accountRankElement.className = `account-rank ${rank.class}`;
        }
        
        function getAccountRank(value) {
            if (value >= 30000) return { name: "–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä", class: "rank-legendary" };
            if (value >= 20000) return { name: "–∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä —Ä–∞–Ω–≥–∞ SSS", class: "rank-sss" };
            if (value >= 10000) return { name: "–∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä —Ä–∞–Ω–≥–∞ SS", class: "rank-ss" };
            if (value >= 5000) return { name: "–∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä —Ä–∞–Ω–≥–∞ S", class: "rank-s" };
            if (value >= 3000) return { name: "–∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä —Ä–∞–Ω–≥–∞ A", class: "rank-a" };
            if (value >= 1000) return { name: "–º–∞—Å—Ç–µ—Ä –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä", class: "rank-master" };
            if (value >= 701) return { name: "–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä", class: "rank-professional" };
            if (value >= 301) return { name: "–æ–ø—ã—Ç–Ω—ã–π –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä", class: "rank-experienced" };
            return { name: "–Ω–∞—á–∏–Ω–∞—é—â–∏–π –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä", class: "rank-beginner" };
        }
        
        function updateRarityInfo() {
            rarityChancesElement.innerHTML = cardTypes.map(card => 
                `<div><strong>${card.name}</strong> (${card.rarity}): ${card.chance}</div>`
            ).join('');
        }
        
        function showNotification(text) {
            notificationElement.textContent = text;
            notificationElement.style.display = 'block';
            setTimeout(() => {
                notificationElement.style.display = 'none';
            }, 3000);
        }
        
        function addChatMessage(text, color, mutation) {
            const messageElement = document.createElement('div');
            messageElement.className = 'message';
            messageElement.textContent = text;
            
            if (mutation === "golden") {
                messageElement.style.color = "goldenrod";
                messageElement.style.fontWeight = "bold";
            } else if (mutation === "void") {
                messageElement.style.color = "#000";
                messageElement.style.textShadow = "0 0 3px #fff";
            } else if (color) {
                messageElement.style.color = color;
            }
            
            chatMessages.insertBefore(messageElement, chatMessages.firstChild);
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
            while (chatMessages.children.length > 50) {
                chatMessages.removeChild(chatMessages.lastChild);
            }
        }
        
        function applyMutationStyles(cardElement, mutation) {
            if (!mutation) return;
            
            const backSide = cardElement.querySelector('.card-back, .multi-card-back, .mega-card-back');
            const label = cardElement.querySelector('.mutation-label');
            
            if (mutation === "shiny") {
                backSide.classList.add('shiny');
                if (label) {
                    label.textContent = "–ë–ª–µ—Å—Ç—è—â–∞—è";
                    label.style.color = "white";
                }
            } else if (mutation === "golden") {
                backSide.classList.add('golden');
                if (label) {
                    label.textContent = "–ó–æ–ª–æ—Ç–∞—è";
                    label.style.color = "gold";
                }
            } else if (mutation === "ultra-legendary") {
                backSide.classList.add('ultra-legendary');
                if (label) {
                    label.textContent = "–£–ª—å—Ç—Ä–∞–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è";
                    label.style.color = "white";
                }
            } else if (mutation === "void") {
                backSide.classList.add('void');
                if (label) {
                    label.textContent = "–ü—É—Å—Ç–æ—Ç–Ω–∞—è";
                    label.style.color = "#fff";
                    label.style.backgroundColor = "#000";
                }
            }
        }
        
        function showCardInModal(card) {
            newCard.classList.remove('flipped');
            newCard.querySelector('.card-back').className = 'card-back';
            newCard.querySelector('.mutation-label').textContent = '';
            newCard.querySelector('.mutation-label').className = 'mutation-label';
            cardModal.style.display = 'flex';
            
            const cardBack = newCard.querySelector('.card-back');
            cardBack.style.backgroundColor = card.color;
            cardBack.querySelector('.card-name').textContent = card.name;
            cardBack.querySelector('.card-rarity').textContent = card.rarity;
            cardBack.querySelector('.card-chance').textContent = card.chance || "–°–µ–∑–æ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞";
            
            applyMutationStyles(newCard, card.mutation);
            
            setTimeout(() => {
                newCard.classList.add('flipped');
            }, 500);
        }
        
        function checkSpecialEvents() {
            return { total: 1, details: {} };
        }
        
        function startCooldown(time) {
            isCooldown = true;
            buyPackBtn.disabled = true;
            buyBigPackBtn.disabled = true;
            buyMegaPackBtn.disabled = true;
            let timeLeft = time / 1000;
            
            cooldownElement.style.display = 'block';
            cooldownElement.textContent = `–ü–æ–¥–æ–∂–¥–∏—Ç–µ ${timeLeft} —Å–µ–∫`;
            
            const interval = setInterval(() => {
                timeLeft--;
                cooldownElement.textContent = `–ü–æ–¥–æ–∂–¥–∏—Ç–µ ${timeLeft} —Å–µ–∫`;
                
                if (timeLeft <= 0) {
                    clearInterval(interval);
                    isCooldown = false;
                    buyPackBtn.disabled = false;
                    buyBigPackBtn.disabled = false;
                    buyMegaPackBtn.disabled = !megaPackAvailable;
                    cooldownElement.style.display = 'none';
                }
            }, 1000);
        }
        
        function handleLogin() {
            const name = playerNameInput.value.trim();
            if (name.length < 3 || name.length > 20) {
                alert('–ò–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 3 –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤');
                return;
            }
            playerName = name;
            localStorage.setItem('playerName', playerName);
            loginModal.style.display = 'none';
            initGame();
        }
        
        function initGame() {
            updateRarityInfo();
            updateCollection();
            updateAccountValue();
            checkEvent();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∞–ª—é—Ç—É
            cakeCountElement.textContent = playerCakes;
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç
            addChatMessage("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É! –û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –∫–∞—Ä—Ç—ã –∏ —Å–æ–±–∏—Ä–∞–π—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é!", "#4CAF50");
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        buyPackBtn.addEventListener('click', function() {
            if (isCooldown) return;
            startCooldown(COOLDOWN_TIME);
            
            newCard.classList.remove('flipped');
            newCard.querySelector('.card-back').className = 'card-back';
            newCard.querySelector('.mutation-label').textContent = '';
            newCard.querySelector('.mutation-label').className = 'mutation-label';
            cardModal.style.display = 'flex';
            
            setTimeout(() => {
                const card = getRandomCard();
                const cardBack = newCard.querySelector('.card-back');
                cardBack.style.backgroundColor = card.color;
                cardBack.querySelector('.card-name').textContent = card.name;
                cardBack.querySelector('.card-rarity').textContent = card.rarity;
                cardBack.querySelector('.card-chance').textContent = card.chance;
                
                applyMutationStyles(newCard, card.mutation);
                
                setTimeout(() => {
                    newCard.classList.add('flipped');
                    setTimeout(() => {
                        processCardDrop(card);
                    }, 1000);
                }, 500);
            }, 500);
        });
        
        buyBigPackBtn.addEventListener('click', openBigPack);
        buyMegaPackBtn.addEventListener('click', openMegaPack);
        
        cardModal.addEventListener('click', function(e) {
            if (e.target === cardModal && newCard.classList.contains('flipped')) {
                cardModal.style.display = 'none';
            }
        });
        
        bigPackModal.addEventListener('click', function(e) {
            if (e.target === bigPackModal) {
                bigPackModal.style.display = 'none';
            }
        });
        
        megaPackModal.addEventListener('click', function(e) {
            if (e.target === megaPackModal) {
                megaPackModal.style.display = 'none';
            }
        });
        
        resetBtn.addEventListener('click', function() {
            if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å—é –∫–æ–ª–ª–µ–∫—Ü–∏—é?")) {
                userCollection = [];
                playerCakes = 0;
                localStorage.setItem('playerCakes', playerCakes);
                cakeCountElement.textContent = playerCakes;
                saveCollection();
                updateAccountValue();
                updateCollection();
                showNotification("–ö–æ–ª–ª–µ–∫—Ü–∏—è —Å–±—Ä–æ—à–µ–Ω–∞!");
            }
        });
        
        loginButton.addEventListener('click', handleLogin);
        playerNameInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') handleLogin();
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', function() {
            if (playerName) {
                loginModal.style.display = 'none';
                initGame();
            }
        });

        // –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
        function updateTradeSelects() { }
        function updatePlayerCounters() { 
            onlinePlayersElement.textContent = "1";
            totalPlayersElement.textContent = "1";
        }
    </script>
</body>
</html>
